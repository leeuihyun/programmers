## [1차] 추석 트래픽

https://programmers.co.kr/learn/courses/30/lessons/17676

## 문제 설명

이번 추석에도 시스템 장애가 없는 명절을 보내고 싶은 어피치는 서버를 증설해야 할지 고민이다.

장애 대비용 서버 증설 여부를 결정하기 위해 작년 추석 기간인 9월 15일 로그 데이터를 분석한 후 초당 최대 처리량을 계산해보기로 했다.

초당 최대 처리량은 요청의 응답 완료 여부에 관계없이 임의 시간부터 1초(=1,000밀리초)간 처리하는 요청의 최대 개수를 의미한다.

## 입력 형식

- ```solution``` 함수에 전달되는 ```lines``` 배열은 N(1 ≦ N ≦ 2,000)개의 로그 문자열로 되어 있으며, 각 로그 문자열마다 요청에 대한 응답완료시간 S와 처리시간 T가 공백으로 구분되어 있다.
- 응답완료시간 S는 작년 추석인 2016년 9월 15일만 포함하여 고정 길이 ```2016-09-15 hh:mm:ss.sss``` 형식으로 되어 있다.
- 처리시간 T는 ```0.1s```, ```0.312s```, ```2s``` 와 같이 최대 소수점 셋째 자리까지 기록하며 뒤에는 초 단위를 의미하는 ```s```로 끝난다.
- 예를 들어, 로그 문자열 ```2016-09-15 03:10:33.020 0.011s```은 "2016년 9월 15일 오전 3시 10분 33.010초"부터 "2016년 9월 15일 오전 3시 10분 33.020초"까지 "0.011초" 동안 처리된 요청을 의미한다. (처리시간은 시작시간과 끝시간을 포함)
- 서버에는 타임아웃이 3초로 적용되어 있기 때문에 처리시간은 0.001 ≦ T ≦ 3.000이다.
- ```lines``` 배열은 응답완료시간 S를 기준으로 오름차순 정렬되어 있다.

## 출력 형식

- solution 함수에서는 로그 데이터 lines 배열에 대해 초당 최대 처리량을 리턴한다.

## 입출력 예제

```
입력: [
"2016-09-15 20:59:57.421 0.351s",
"2016-09-15 20:59:58.233 1.181s",
"2016-09-15 20:59:58.299 0.8s",
"2016-09-15 20:59:58.688 1.041s",
"2016-09-15 20:59:59.591 1.412s",
"2016-09-15 21:00:00.464 1.466s",
"2016-09-15 21:00:00.741 1.581s",
"2016-09-15 21:00:00.748 2.31s",
"2016-09-15 21:00:00.966 0.381s",
"2016-09-15 21:00:02.066 2.62s"
]

출력: 7
```

설명: 아래 타임라인 그림에서 빨간색으로 표시된 1초 각 구간의 처리량을 구해보면 (1)은 4개, (2)는 7개, (3)는 2개임을 알 수 있다.

따라서 초당 최대 처리량은 7이 되며, 동일한 최대 처리량을 갖는 1초 구간은 여러 개 존재할 수 있으므로 이 문제에서는 구간이 아닌 개수만 출력한다.

<img src="http://t1.kakaocdn.net/welcome2018/chuseok-01-v5.png" width="500px">

## 풀이 방법

알고 나면 간단한 완전 탐색 문제이지만 완전 탐색을 하기 위해 데이터를 정리하는 과정에서 많이 헤맸다.

처음엔 '시간'에 꽂혀서 입력 데이터를 전부 시간으로 변환하고 계산하여 풀려고 했지만 코드가 너무 복잡하고 어디에서 틀렸는지도 구분하기 힘들어서 포기했다.  
(이 과정에서 ```time.h```에 있는 시간을 다루는 ```struct tm```과 ```time_t``` 변수를 알게 됐다.)

단위가 ms까지 있기 때문에 년월일시분초가 나눠져있으면 힘들다고 판단하여 전부 ```double```형식인 **ms** 단위로 바꾸었다.

요청 시간과 처리 완료 시간을 담은 ```pair<int, int>```형식의 벡터 ```log```에 값들을 저장해주었고, 초당 최대 처리량을 계산해야 하므로

2중 반복문을 돌면서 i번째 처리 완료 시간에서 1초를 더한 값이 j번째 요청 시간 이상이라면 ```cnt```를 세어주고 값을 갱신했다.

이 문제를 풀면서 중요했던 점은 1초는 시작 시간과 끝 시간을 포함한 1초이므로 실제로는 0.999초라는 것이다.

그래서 입력 데이터를 통해 시작 시간, 끝 시간을 계산할 때 **처리 시간 + 0.001**을 빼주어야 한다.

반복문 내 조건문에서도 주의해야 하는데, 값에 0.999가 아니라 1을 더했을 경우 조건식에 ```>=```이 아니라 ```>```을 사용해야 한다.